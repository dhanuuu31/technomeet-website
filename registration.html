<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Event Registration</title>

<style>
:root{
  --bg:#020617;--card:#0b1220;--accent:#ffd700;--accent-dark:#ffd700;
  --text:#e5e7eb;--muted:#9ca3af;--border:#1f2937
}
*{box-sizing:border-box;font-family:Inter,system-ui,Arial}
body{
  margin:0;min-height:100vh;
  background: url('slide5.webp') no-repeat center center fixed;
  background-size: cover;
  color:var(--text);display:flex;justify-content:center;align-items:center;padding:32px
}
.container{width:100%;max-width:600px}
.card{
  background: rgba(11,18,32,0.85);
  border-radius:18px;padding:24px;
  border:1px solid rgba(200, 229, 40, 0.741);
  box-shadow:0 20px 60px rgba(0,0,0,.6)
}
h1{margin:0 0 12px;font-size:30px;text-align:center;color:var(--accent)}
.sub{color:var(--muted);margin-bottom:18px;text-align:center}
.section{margin-bottom:18px}
.label{margin-bottom:6px;display:block;color:#c7d2fe}
input, select{width:100%;padding:12px 14px;border-radius:12px;background:#020617;border:1px solid var(--border);color:var(--text)}
.events{display:grid;gap:12px}
.event{padding:14px;border-radius:14px;border:1px solid var(--border);cursor:pointer}
.event.active{border-color:var(--accent);box-shadow:0 0 0 1px var(--accent)}
.options{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.box{padding:14px;border-radius:12px;border:1px solid var(--border);cursor:pointer}
.box.active{border-color:var(--accent);box-shadow:0 0 0 1px var(--accent)}
.box.disabled {
  opacity: 0.4;
  cursor: not-allowed;
}
.total{display:flex;justify-content:space-between;padding:14px;border-radius:12px;background:#020617;border:1px solid var(--border)}
.price{color:var(--accent);font-weight:800;font-size:22px}
button{width:100%;padding:14px;border-radius:14px;border:none;background:linear-gradient(180deg,var(--accent),var(--accent-dark));color:#0e0f00;font-size:16px;font-weight:800;cursor:pointer}
.whatsapp{background:#d7c247;color:#0b0b0a;margin-top:12px}
.note{font-size:13px;color:var(--muted)}
.qr{display:flex;justify-content:center}
.qr img{width:200px;border-radius:12px}
.badge{display:inline-block;padding:6px 12px;border-radius:12px;font-weight:800;margin-top:6px;color:#0e0f00}
.badge.pending{background:#ffc107}
.badge.verified{background:#28a745}
.badge.rejected{background:#dc3545}
.backBtn{
  position: fixed;
  top: 12px;
  left: 12px;

  background: none;
  border: none;

  color: #ffd700;
  font-size: 18px;   /* small size */
  font-weight: 900;

  padding: 4px 6px;
  cursor: pointer;

  z-index: 1000;
}

.backBtn:hover{
  transform: scale(1.2);
}

</style>
</head>

<body>
  <button class="backBtn" onclick="goHome()">‚Üê</button>


<div class="container">
<div class="card">

<h1>Registration</h1>
<div class="sub">CodeWar ‚Ä¢ Cyber Shield ‚Ä¢ Model Exhibition</div>

<!-- EVENT -->
<div class="section">
<label class="label">Select Event</label>
<div class="events">
  <div class="event active" data-event="Codewar">üíª CodeWar</div>
  <div class="event" data-event="Cyber Shield">üõ° Cyber Shield</div>
  <div class="event" data-event="Model Exhibition">ü§ñ Project Expo</div>
</div>
</div>

<!-- TYPE -->
<div class="section">
<label class="label">Registration Type</label>
<div class="options">
  <div class="box active" id="individual">Individual</div>
  <div class="box" id="team">Team</div>
</div>
</div>

<!-- TEAM SECTION -->
<div class="section" id="teamFields" style="display:none;">
  <label class="label">Team Members</label>

  <!-- Cyber Shield team size -->
  <select id="teamSize" style="display:none;">
    <option value="2">2 Participants</option>
    <option value="3">3 Participants</option>
    <option value="4">4 Participants</option>
  </select>

  <input id="member1" placeholder="Participant 1 Name">
  <input id="member2" placeholder="Participant 2 Name">
  <input id="member3" placeholder="Participant 3 Name">
  <input id="member4" placeholder="Participant 4 Name">
</div>


<!-- PHONE -->
<div class="section">
<label class="label">Phone Number</label>
<input type="tel" id="phone" placeholder="Enter phone number">
</div>

<!-- EMAIL -->
<div class="section">
<label class="label">Email Address</label>
<input type="email" id="email" placeholder="Enter email address">
</div>

<!-- TOTAL -->
<div class="section">
<div class="total">
  <span>Total Payable</span>
  <span class="price" id="amount">‚Çπ100/ head</head></span>
</div>
</div>


<!-- SCREENSHOT NOTE --
<div class="section">
<label class="label">Scan & Pay</label>
<div class="qr"><img src="QR.jpeg" alt="UPI QR"></div>
<div class="note">Pay exact amount using any UPI app</div>
</div>

<!-- SCREENSHOT NOTE --
<div class="section">
<label class="label">Payment Screenshot</label>
<div class="note">
After payment, take a screenshot of the successful transaction.
You will upload it on the next Google Form page.
</div>
</div>

<!-- TXN --
<div class="section">
<label class="label">UPI Transaction ID</label>
<input id="txn" placeholder="Enter UPI Transaction ID">
</div>

<!-- PAYMENT STATUS (AUTO) --
<div class="section">
<label class="label">Payment Status</label>
<div id="statusBadge" class="badge pending">Pending</div>
<input type="hidden" id="paymentStatus" value="Pending">
</div>
-->

<button onclick="continueRegistration()">Continue Registration</button>
<button class="whatsapp" onclick="sendWhatsApp()">Join via WhatsApp (Fallback)</button>

</div>
</div>

<script>
let currentEvent="Codewar";
let type="individual";

const events=document.querySelectorAll('.event');
const individual=document.getElementById('individual');
const team=document.getElementById('team');
const teamFields=document.getElementById('teamFields');
const teamSize=document.getElementById('teamSize');
const amount=document.getElementById('amount');

const members=[
  member1,member2,member3,member4
];

events.forEach(e=>{
  e.onclick=()=>{
    events.forEach(x=>x.classList.remove('active'));
    e.classList.add('active');
    currentEvent = e.dataset.event;

    if(currentEvent === "Codewar"){
      // FORCE individual only
      type = "individual";

      individual.classList.add("active");
      team.classList.remove("active");

      team.classList.add("disabled");   // üîí lock team
      teamFields.style.display = "none";
      teamSize.style.display = "none";

    } 
    else {
      // Enable team for other events
      team.classList.remove("disabled");
    }
  }
});

individual.onclick=()=>{
  type="individual";
  individual.classList.add("active");
  team.classList.remove("active");
  teamFields.style.display="none";
  teamSize.style.display="none";
};

team.onclick = () => {
  // üö´ BLOCK TEAM FOR CODEWAR NO MATTER WHAT
  if (currentEvent === "Codewar") return;
  if (team.classList.contains("disabled")) return;

  type = "team";

  team.classList.add("active");
  individual.classList.remove("active");

  teamFields.style.display = "block";

  if (currentEvent === "Cyber Shield") {
    teamSize.style.display = "block";
    updateMembers();
  } else {
    teamSize.style.display = "none";
    members.forEach(m => m.style.display = "block");
  }
};

teamSize.onchange=updateMembers;

function updateMembers(){
  let size=parseInt(teamSize.value);
  members.forEach((m,i)=>{
    m.style.display=i<size?"block":"none";
    if(i>=size) m.value="";
  });
}
// Update badge based on txn input
document.getElementById("txn").addEventListener("input", function(){
  const txn = this.value.trim();
  if(validTxnIDs.includes(txn)){
    statusBadge.textContent = "Verified";
    statusBadge.className = "badge verified";
    paymentStatusInput.value = "Verified";
  } else if(txn.length > 0){
    statusBadge.textContent = "Rejected";
    statusBadge.className = "badge rejected";
    paymentStatusInput.value = "Rejected";
  } else {
    statusBadge.textContent = "Pending";
    statusBadge.className = "badge pending";
    paymentStatusInput.value = "Pending";
  }
});

function continueRegistration(){

  const phoneVal=document.getElementById("phone").value.trim();
  const emailVal=document.getElementById("email").value.trim();
  const m1=document.getElementById("member1").value.trim();
  const m2=document.getElementById("member2").value.trim();
  const m3=document.getElementById("member3").value.trim();
  const m4=document.getElementById("member4").value.trim();

  if(!phoneVal){ alert("Please enter phone number"); return; }
  if(!emailVal){ alert("Please enter email"); return; }

  if(type==="team" && (!m1||!m2||!m3||!m4)){ 
    alert("Please enter all team member names"); 
    return; 
  }

  const formURL =
  "https://docs.google.com/forms/d/e/1FAIpQLScbg_fCpTsEybqZzMQI_wDbuHYZWrBNxEEnErGhT9DhcrOATw/viewform?usp=pp_url"
  + "&entry.617927822=" + encodeURIComponent(currentEvent)
  + "&entry.1709362589=" + encodeURIComponent(type)
  + "&entry.175607427=" + encodeURIComponent(m1)
  + "&entry.1065588422=" + encodeURIComponent(m2)
  + "&entry.694350229=" + encodeURIComponent(m3)
  + "&entry.559508603=" + encodeURIComponent(m4)
  + "&entry.2103995094=" + encodeURIComponent(phoneVal)
  + "&entry.1077259244=" + encodeURIComponent(emailVal);

  window.location.href=formURL;
}

function sendWhatsApp(){

  const phoneVal=document.getElementById("phone").value.trim();
  const emailVal=document.getElementById("email").value.trim();
  const m1=document.getElementById("member1").value.trim();
  const m2=document.getElementById("member2").value.trim();
  const m3=document.getElementById("member3").value.trim();
  const m4=document.getElementById("member4").value.trim();

  if(!phoneVal){ alert("Please enter phone number"); return; }
  if(!emailVal){ alert("Please enter email"); return; }

  let groupLink = "";

  if(currentEvent === "Codewar"){
    groupLink = "https://chat.whatsapp.com/LMsVK5Hz4DsLxWJKNlKPm0";
  }
  else if(currentEvent === "Cyber Shield"){
    groupLink = "https://chat.whatsapp.com/Lfq5ERDcrsP0hdXzcvo5qd";
  }
  else if(currentEvent === "Model Exhibition"){
    groupLink = "https://chat.whatsapp.com/L6tyqVwe0AaH9bECMHhAJb";
  }

  let msg = "";

  if(type==="team"){
    msg =
`Event: ${currentEvent}
Type: Team
Members: ${m1}, ${m2}, ${m3}, ${m4}
Phone: ${phoneVal}
Email: ${emailVal}`;
  }
  else{
    msg =
`Event: ${currentEvent}
Type: Individual
Name: ${m1}
Phone: ${phoneVal}
Email: ${emailVal}`;
  }

  window.open(`${groupLink}?text=${encodeURIComponent(msg)}`, "_blank");
}
function goHome(){
  window.location.href = "index.html";
}

</script>

</body>
</html>
